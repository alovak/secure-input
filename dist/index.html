<html>
    <head>
        <title>PowerPayments JS SDK Demo</title>
		<link rel="stylesheet" href="/bootstrap.min.css">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.12/css/all.css" integrity="sha384-G0fIWCsCzJIMAVNQPfjH08cyYaUtMwjJwqiRKxxE/rx96Uroj1BtIQ6MLJuheaO9" crossorigin="anonymous">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <style>
            @import url('https://fonts.googleapis.com/css?family=Open+Sans:400,600');

            body {
                font-family: 'Open Sans', sans-serif !important;
            }
        </style>

        <script>
            function async(u, c) {
                var d = document, t = 'script',
                    o = d.createElement(t),
                    s = d.getElementsByTagName(t)[0];
                o.src = u;
                if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
                s.parentNode.insertBefore(o, s);
            }

        </script>

        <style>
            .container {
                max-width: 960px;
            }

            .element-icon {
                position: absolute;
                top: 11px;
                right: 30px;
            }

            .valid {
                color: #42cb42;
                transition: all 0.50s ease-in-out;
            }

            .invalid {
                color: #e05454;
                transition: all 0.50s ease-in-out;
            }

            .border-top { border-top: 1px solid #e5e5e5; }
            .border-bottom { border-bottom: 1px solid #e5e5e5; }
            .border-top-gray { border-top-color: #adb5bd; }

            .box-shadow { box-shadow: 0 .25rem .75rem rgba(0, 0, 0, .05); }

            .lh-condensed { line-height: 1.25; }

            .form-control div {
                height: 24px;
            }

            .PowerElement--focus {   
                color:#495057;
                background-color:#fff;
                border-color:#80bdff;
                outline:0;
                box-shadow:0 0 0 .2rem rgba(0,123,255,.25)
            }
        </style>
        <script>
			var style = {
				base: {
					fontSize: '1rem',
                    fontFamily: "'Open Sans', sans-serif",
                    fontWeight: '400',
                    lineHeight: '1.5',
					color: "#495057",
					fontSmoothing: 'antialiased',
					'::placeholder': {
						color: '#00ff00',
                        fontSize: '1rem',
					},
                    ':focus': {
                        fontWeight: '600'
                    },
                    ':hover': {
                        color: 'green'
                    }
				},
                complete: {
                    color: 'yellow',
                    ':focus': {
                        color: 'yellow',
                    }
                },
				invalid: {
					color: '#e5424d',
                    ':focus': {
                        color: '#e5424d'
                    },
				},
			};


            var fonts = {
                cssSrc: 'https://fonts.googleapis.com/css?family=Open+Sans:400,600'
            };

            async("/power-payments.js?rnd=" + (Math.random() * 1e5 | 0), function() {
                var power = PowerPayments('key');
                var elements = power.elements();
                var card = elements.create('number', { placeholder: 'Card number', style: style, fonts: fonts }).mount('#number');
                var cvc = elements.create('cvc', { placeholder: 'CVC', style: style, fonts: fonts }).mount('#cvc');
                var exp = elements.create('exp', { placeholder: 'MM / YY', style: style, fonts: fonts }).mount('#exp');

                var btn1 = document.getElementById('btn1');
                var btn2 = document.getElementById('btn2');

                btn1.addEventListener('click', function() {
                    card.focus();
                });

                btn2.addEventListener('click', function() {
                    cvc.focus();
                });

                btn3.addEventListener('click', function() {
					var resultEl = document.getElementById('result');

                    elements.createToken().then(function(result) {
						resultEl.innerHTML = JSON.stringify(result);
                    });
                });

                card.addEventListener('change', function(event) {
                    console.log('change event', event);
                    var feedbackEl = document.getElementById('number').nextElementSibling;
                    var iconEl = feedbackEl.nextElementSibling;

                    iconEl.classList.remove("invalid");
                    iconEl.classList.remove("valid");

                    if (event.isInvalid) {
                        feedbackEl.style.display = 'block';
                        iconEl.classList.add("invalid");
                    } else {
                        feedbackEl.style.display = 'none';
                        iconEl.classList.remove("invalid");
                        iconEl.classList.remove("valid");

                        if (event.complete === true) {
                            iconEl.classList.add("valid");
                        }
                    }
                });
            });

        </script>
    </head>
    <body>
		<div class="container">
            <div class="py-5 text-center">
                <h2>Checkout form</h2>
                <p class="lead">Below is an example form built entirely with Bootstrap's form controls. Each required form group has a validation state that can be triggered by attempting to submit the form without completing it.</p>
                <p><input type="button" id="btn1" value="focus card" /></p>
                <p><input type="button" id="btn2" value="focus cvc" /></p>
                <p><input type="button" id="btn3" value="tokenize!" /></p>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label>Name on card</label>
                    <input class="form-control" id="cc-name" placeholder="" required="" type="text">
                    <small class="text-muted">Full name as displayed on card</small>
                    <div class="invalid-feedback">
                        Name on card is required
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <div id="number" class="form-control"></div>
                    <div class="invalid-feedback">
                        Card number is not valid
                    </div>
                    <i class="fab fa-cc-visa element-icon"></i>
                </div>
            </div>
            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="cc-email">Email</label>
                    <input class="form-control" id="cc-email" placeholder="" required="" type="email">
                    <small class="text-muted">Email</small>
                    <div class="invalid-feedback">
                        Email is required
                    </div>

                </div>
            </div>
            <div class="row">
                <div class="col-md-3 mb-3">
                    <label>Expiration</label>
                    <div id="exp" class="form-control"></div>
                    <div class="invalid-feedback">
                        Expiration date required
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <label>CVV</label>
                    <div id="cvc" class="form-control"></div>
                    <div class="invalid-feedback">
                        Security code required
                    </div>
                </div>
            </div>
		</div>
        <div id="result" class="alert alert-success" role="alert">
            This is a success alertâ€”check it out!
        </div>
    </body>
</html>
